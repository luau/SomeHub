local a=getgenv and getgenv()or _G or shared;local b={_G,shared}local c=a.globalcontainer or{}a.globalcontainer=c;if getgenv then table.insert(b,getgenv())end;local d={}local e=0;local f,g;local function h(b)if e>=16379 then return end;if b==a.globalcontainer then return end;for a,a in ipairs(d)do if a==b then return end end;table.insert(d,b)e+=1;for a,b in next,b do if type(b)=="table"then h(b)elseif type(b)=="function"then a=tostring(a):lower()for d,e in next,f do if e(a)then c[d]=b;if g then print(d,a)end end end end end;e-=1 end;local function a(a,i,j)if i then i=nil else local b={}for a,d in next,a do if not c[a]then d="return "..d;b[a]=loadstring(d)i=true end end;if not i then return end;a=b end;f=a;g=j;table.clear(d)e=0;h(b)f=nil;g=nil end;return a,c
