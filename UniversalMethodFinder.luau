local a=getgenv and getgenv()or _G or shared;local b={_G,shared}local c=a.globalcontainer or{}a.globalcontainer=c;if getgenv then table.insert(b,getgenv())end;local a={}local d=0;local function e()d=d+1;e()end;pcall(e)local e,f,g,h={}local function i(b,d)if c==b then return end;if a[b]then return end;a[b]=true;f=f+1;for a,b in next,b do local j=type(b)if j=="table"then if h<=f then continue end;i(b,a)elseif j=="function"then a=tostring(a):lower()for e,f in next,e do if f(a,d)then c[e]=b;if g then print(e,a)end end end end end;f=f-1 end;local function j(j,k,l,m)for a,b in next,j do if c[a]and not k then continue end;if not b:find("return",nil,true)then b="return "..b end;e[a]=loadstring(b)end;f=0;g=m;h=l or d;i(b)h=nil;f=nil;g=nil;table.clear(a)table.clear(e)end;return j,c
